(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(1),c=n.n(a),s=n(6),i=n.n(s),r=(n(15),n(9)),u=n(2),d=n(7),l=n(8),p={api:new(function(){function e(t){Object(d.a)(this,e),this.options=t}return Object(l.a)(e,[{key:"getInitialCards",value:function(){return fetch(this.options.baseUrl+"/cards",{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch(this.options.baseUrl+"/users/me",{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e,t){return this.name=e,this.about=t,fetch(this.options.baseUrl+"/users/me",{method:"PATCH",body:JSON.stringify({name:"".concat(this.name),about:"".concat(this.about)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e,t){return this.name=e,this.link=t,fetch(this.options.baseUrl+"/cards",{method:"POST",body:JSON.stringify({name:"".concat(this.name),link:"".concat(this.link)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return this.id=e,fetch(this.options.baseUrl+"/cards/"+e,{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch(this.options.baseUrl+"/cards/like/"+e,{method:"PUT",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteLike",value:function(e){return fetch(this.options.baseUrl+"/cards/like/"+e,{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"updateAvatar",value:function(e){return this.link=e,fetch(this.options.baseUrl+"/users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:"".concat(this.link)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}}]),e}())({baseUrl:"https://nomoreparties.co/cohort9",headers:{authorization:"548c5797-a590-40d0-8f9e-48d758ca9ae7","Content-Type":"application/json"}})},h=c.a.createContext(),j=n.p+"static/media/logo.fad4f8a5.svg";var m=function(){return Object(o.jsx)("header",{className:"header root__section",children:Object(o.jsx)("img",{src:j,id:"logo",alt:"mesto logo",className:"logo"})})};var f=function(e){var t=c.a.useContext(h);return Object(o.jsxs)("div",{className:"place-card",id:e.card._id,children:[Object(o.jsx)("div",{className:"place-card__image",onMouseUp:function(t){t.target.classList.contains("place-card__image")&&e.onCardClick(e.card)},style:{backgroundImage:"url("+e.card.link+")"},children:e.card.owner._id===t._id?Object(o.jsx)("button",{className:"place-card__delete-icon",onMouseUp:function(){e.onCardDelete(e.card)}}):""}),Object(o.jsxs)("div",{className:"place-card__description",children:[Object(o.jsx)("h3",{className:"place-card__name",children:e.card.name}),Object(o.jsxs)("div",{className:"place-card__like-box",children:[Object(o.jsx)("button",{className:"place-card__like-icon ".concat(e.card.likes.some((function(e){return e._id===t._id}))?"place-card__like-icon_liked":""),onMouseUp:function(){e.onCardLike(e.card)}}),Object(o.jsx)("span",{className:"place-card__like-number",children:e.card.likes.length})]})]})]})};var b=function(e){var t=c.a.useContext(h);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{id:"profileRoot",className:"profile root__section",children:Object(o.jsxs)("div",{className:"user-info",children:[Object(o.jsx)("div",{id:"userInfoPic",className:"user-info__photo",style:{backgroundImage:"url("+t.avatar+")",cursor:"pointer"},onMouseUp:e.onEditAvatar}),Object(o.jsxs)("div",{id:"userInfoData",className:"user-info__data",children:[Object(o.jsx)("h1",{id:"userInfoName",className:"user-info__name",children:t.name}),Object(o.jsx)("p",{id:"userInfoJob",className:"user-info__job",children:t.about}),Object(o.jsx)("button",{id:"userInfoEditButton",className:"button user-info-edit__button",onMouseUp:e.onEditProfile,children:"Edit"})]}),Object(o.jsx)("button",{id:"userInfoButton",className:"button user-info__button",onMouseUp:e.onAddPlace,children:"+"})]})}),Object(o.jsx)("div",{id:"placesList",className:"places-list root__section",children:e.cards&&e.cards.map((function(t,n){return Object(o.jsx)(f,{onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete,card:t},n)}))})]})},_=n.p+"static/media/close.8a65f75d.svg";var O=function(e){return Object(o.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_is-opened":""," "),children:Object(o.jsxs)("div",{className:"popup__content",children:[Object(o.jsx)("img",{src:_,alt:"close",className:"popup__close",onMouseUp:e.onClose}),Object(o.jsx)("h3",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(o.jsxs)("form",{id:"popupForm".concat(e.name),className:"popup__form",name:"form",noValidate:!0,onSubmit:e.onSubmit,children:[e.children,Object(o.jsx)("button",{id:"popupButton".concat(e.name),type:"submit",className:"button popup__button",children:e.submitBtnTitle})]})]})})};var x=function(e){var t=c.a.useState(""),n=Object(u.a)(t,2),a=n[0],s=n[1],i=c.a.useState(""),r=Object(u.a)(i,2),d=r[0],l=r[1];return Object(o.jsx)(O,{onSubmit:function(t){t.preventDefault(),e.onAddCard({cardName:a,cardLink:d})},isOpen:e.isOpen,onClose:e.onClose,name:"addCardPopup",submitBtnTitle:"+",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"inputName",type:"text",name:"name",required:!0,minLength:"2",maxLength:"30",onChange:function(e){s(e.target.value)},className:"popup__input popup__input_type_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(o.jsx)("span",{id:"error-inputName",className:"error"}),Object(o.jsx)("input",{id:"inputLink",type:"url",name:"link",required:!0,minLength:"2",onChange:function(e){l(e.target.value)},className:"popup__input popup__input_type_link-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(o.jsx)("span",{id:"error-inputLink",className:"error"})]})})};var v=function(e){var t=c.a.useContext(h),n=c.a.useState(""),a=Object(u.a)(n,2),s=a[0],i=a[1],r=c.a.useState(""),d=Object(u.a)(r,2),l=d[0],p=d[1];return c.a.useEffect((function(){i(t.name),p(t.about)}),[t]),Object(o.jsx)(O,{onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:s,about:l})},isOpen:e.isOpen,onClose:e.onClose,name:"editPopup",submitBtnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"inputUserNameEdit",type:"text",minLength:"2",maxLength:"30",onChange:function(e){i(e.target.value)},required:!0,name:"userName",className:"popup__input popup__input_type_userName",placeholder:"\u0418\u043c\u044f"}),Object(o.jsx)("span",{id:"error-inputUserNameEdit",className:"error"}),Object(o.jsx)("input",{id:"inputUserInfoEdit",type:"text",name:"userInfo",minLength:"2",maxLength:"30",onChange:function(e){p(e.target.value)},required:!0,className:"popup__input popup__input_type_userInfo",placeholder:"\u041e \u0441\u0435\u0431\u0435"}),Object(o.jsx)("span",{id:"error-inputUserInfoEdit",className:"error"})]})})};var g=function(e){var t=c.a.useContext(h),n=c.a.useState(""),a=Object(u.a)(n,2),s=a[0],i=a[1],r=c.a.useRef();return c.a.useEffect((function(){i(t.avatar)}),[t]),Object(o.jsx)(O,{onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:r.current.value})},isOpen:e.isOpen,onClose:e.onClose,name:"EditPhotoPopup",submitBtnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{ref:r,onChange:function(e){i(e.target.value)},avatar:s,id:"inputLinkPhoto",type:"url",name:"link",required:!0,minLength:"2",className:"popup__input popup__input_type_link-url_photo",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(o.jsx)("span",{id:"error-inputLinkPhoto",className:"error"})]})})};var k=function(e){return Object(o.jsx)("div",{id:"popupPic",className:"popup popup__pic ".concat(!1!==e.card?"popup_is-opened":""),children:Object(o.jsxs)("div",{className:"popup__content popup__content_pic",children:[Object(o.jsx)("img",{id:"popupPicOpen",src:e.card.link,className:"popup-pic__open",alt:""}),Object(o.jsx)("img",{src:_,onMouseUp:e.onClose,alt:"",id:"popupClosePic",className:"popup__close"})]})})};var C=function(){return Object(o.jsx)("footer",{className:"footer root__section",children:Object(o.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var N=function(){var e=p.api,t=c.a.useState(!1),n=Object(u.a)(t,2),a=n[0],s=n[1],i=c.a.useState(!1),d=Object(u.a)(i,2),l=d[0],j=d[1],f=c.a.useState(!1),_=Object(u.a)(f,2),O=_[0],N=_[1],y=c.a.useState(!1),U=Object(u.a)(y,2),P=U[0],L=U[1],E=c.a.useState(""),S=Object(u.a)(E,2),I=S[0],A=S[1],T=c.a.useState(""),D=Object(u.a)(T,2),M=D[0],B=D[1];c.a.useEffect((function(){e.getUserInfo().then((function(e){A(e)})),e.getInitialCards().then((function(e){console.log(e),B(e)}))}),[]);var F=function(){L(!1),j(!1),s(!1),N(!1)};return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(h.Provider,{value:I,children:[Object(o.jsx)(m,{}),Object(o.jsx)(b,{onEditProfile:function(){s(!0)},onAddPlace:function(){j(!0)},onEditAvatar:function(){N(!0)},onCardClick:function(e){L(e)},cards:M,onCardLike:function(t){t.likes.some((function(e){return e._id===I._id}))?e.deleteLike(t._id).then((function(e){var n=M.map((function(n){return n._id===t._id?e:n}));B(n)})):e.likeCard(t._id).then((function(e){var n=M.map((function(n){return n._id===t._id?e:n}));B(n)}))},onCardDelete:function(t){t.owner._id===I._id&&e.deleteCard(t._id).then((function(){var e=M.filter((function(e){return e._id!==t._id}));B(e)}))}}),Object(o.jsx)(k,{card:P,onClose:F}),Object(o.jsx)(x,{isOpen:l,onClose:F,onAddCard:function(t){e.addCard(t.cardName,t.cardLink).then((function(e){B([].concat(Object(r.a)(M),[e]))})),F()}}),Object(o.jsx)(v,{isOpen:a,onClose:F,onUpdateUser:function(t){e.editProfile(t.name,t.about).then((function(e){A(e)})),F()}}),Object(o.jsx)(g,{isOpen:O,onClose:F,onUpdateAvatar:function(t){e.updateAvatar(t.avatar).then((function(e){A(e)})),F()}}),Object(o.jsx)(C,{})]})})};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(N,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.dd15f9cd.chunk.js.map