(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(1),i=n.n(s),c=n(4),a=n.n(c),r=(n(12),n(2)),u=n(5),l=n(6),p={api:new(function(){function e(t){Object(u.a)(this,e),this.options=t}return Object(l.a)(e,[{key:"getInitialCards",value:function(){return fetch(this.options.baseUrl+"/cards",{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch(this.options.baseUrl+"/users/me",{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e,t){return this.name=e.value,this.about=t.value,fetch(this.options.baseUrl+"/users/me",{method:"PATCH",body:JSON.stringify({name:"".concat(this.name),about:"".concat(this.about)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e,t){return this.name=e,this.link=t,fetch(this.options.baseUrl+"/cards",{method:"POST",body:JSON.stringify({name:"".concat(this.name),link:"".concat(this.link)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return this.id=e,fetch(this.options.baseUrl+"/cards/"+e,{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch(this.options.baseUrl+"/cards/like/"+e,{method:"PUT",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteLike",value:function(e){return fetch(this.options.baseUrl+"/cards/like/"+e,{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"updateAvatar",value:function(e){return this.link=e,fetch(this.options.baseUrl+"/users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:"".concat(this.link)}),headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject(" ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}}]),e}())({baseUrl:"https://nomoreparties.co/cohort9",headers:{authorization:"548c5797-a590-40d0-8f9e-48d758ca9ae7","Content-Type":"application/json"}})},d=i.a.createContext(),h=i.a.createContext(),j=n.p+"static/media/logo.fad4f8a5.svg";var m=function(){return Object(o.jsx)("header",{className:"header root__section",children:Object(o.jsx)("img",{src:j,id:"logo",alt:"mesto logo",className:"logo"})})};var _=function(e){return Object(o.jsxs)("div",{className:"place-card",id:e.card._id,children:[Object(o.jsx)("div",{className:"place-card__image",onMouseUp:function(t){t.target.classList.contains("place-card__image")&&e.onCardClick(e.card)},style:{backgroundImage:"url("+e.card.link+")"},children:e.isOwn?Object(o.jsx)("button",{className:"place-card__delete-icon",onMouseUp:function(){e.onCardDelete(e.card)}}):""}),Object(o.jsxs)("div",{className:"place-card__description",children:[Object(o.jsx)("h3",{className:"place-card__name",children:e.card.name}),Object(o.jsxs)("div",{className:"place-card__like-box",children:[Object(o.jsx)("button",{className:"place-card__like-icon ".concat(e.isLiked?"place-card__like-icon_liked":""),onMouseUp:function(){e.onCardLike(e.card)}}),Object(o.jsx)("span",{className:"place-card__like-number",children:e.card.likes.length})]})]})]})};var f=function(e){var t=p.api,n=i.a.useContext(d),s=i.a.useContext(h);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{id:"profileRoot",className:"profile root__section",children:Object(o.jsxs)("div",{className:"user-info",children:[Object(o.jsx)("div",{id:"userInfoPic",className:"user-info__photo",style:{backgroundImage:"url("+n.avatar+")",cursor:"pointer"},onMouseUp:e.onEditAvatar}),Object(o.jsxs)("div",{id:"userInfoData",className:"user-info__data",children:[Object(o.jsx)("h1",{id:"userInfoName",className:"user-info__name",children:n.name}),Object(o.jsx)("p",{id:"userInfoJob",className:"user-info__job",children:n.about}),Object(o.jsx)("button",{id:"userInfoEditButton",className:"button user-info-edit__button",onMouseUp:e.onEditProfile,children:"Edit"})]}),Object(o.jsx)("button",{id:"userInfoButton",className:"button user-info__button",onMouseUp:e.onAddPlace,children:"+"})]})}),Object(o.jsx)("div",{id:"placesList",className:"places-list root__section",children:s&&s.map((function(i,c){var a=i.owner._id===n._id,r=i.likes.some((function(e){return e._id===n._id}));return Object(o.jsx)(_,{onCardClick:e.onCardClick,onCardLike:function(o){var i=o.likes.some((function(e){return e._id===n._id}));t.likeCard(o._id,!i).then((function(t){var n=s.map((function(e){return e._id===o._id?t:e}));e.setCards(n)}))},onCardDelete:function(o){o.owner._id===n._id&&t.deleteCard(o._id).then((function(){var t=s.filter((function(e){return e._id!==o._id}));e.setCards(t)}))},card:i,isOwn:a,isLiked:r},c)}))})]})},b=n.p+"static/media/close.8a65f75d.svg";var O=function(e){return Object(o.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_is-opened":""," "),children:Object(o.jsxs)("div",{className:"popup__content",children:[Object(o.jsx)("img",{src:b,alt:"close",className:"popup__close",onMouseUp:e.onClose}),Object(o.jsx)("h3",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(o.jsxs)("form",{id:"popupForm".concat(e.name),className:"popup__form",name:"form",noValidate:!0,children:[e.children,Object(o.jsx)("button",{id:"popupButton".concat(e.name),type:"submit",className:"button popup__button",children:e.submitBtnTitle})]})]})})};var x=function(e){return Object(o.jsx)(O,{isOpen:e.isOpen,onClose:e.onClose,name:"addCardPopup",submitBtnTitle:"+",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"inputName",type:"text",name:"name",required:!0,minLength:"2",maxLength:"30",className:"popup__input popup__input_type_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(o.jsx)("span",{id:"error-inputName",className:"error"}),Object(o.jsx)("input",{id:"inputLink",type:"url",name:"link",required:!0,minLength:"2",className:"popup__input popup__input_type_link-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(o.jsx)("span",{id:"error-inputLink",className:"error"})]})})};var k=function(e){return Object(o.jsx)(O,{isOpen:e.isOpen,onClose:e.onClose,name:"editPopup",submitBtnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"inputUserNameEdit",type:"text",minLength:"2",maxLength:"30",required:!0,name:"userName",className:"popup__input popup__input_type_userName",placeholder:"\u0418\u043c\u044f"}),Object(o.jsx)("span",{id:"error-inputUserNameEdit",className:"error"}),Object(o.jsx)("input",{id:"inputUserInfoEdit",type:"text",name:"userInfo",minLength:"2",maxLength:"30",required:!0,className:"popup__input popup__input_type_userInfo",placeholder:"\u041e \u0441\u0435\u0431\u0435"}),Object(o.jsx)("span",{id:"error-inputUserInfoEdit",className:"error"})]})})};var v=function(e){return Object(o.jsx)(O,{isOpen:e.isOpen,onClose:e.onClose,name:"EditPhotoPopup",submitBtnTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"inputLinkPhoto",type:"url",name:"link",required:!0,minLength:"2",className:"popup__input popup__input_type_link-url_photo",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(o.jsx)("span",{id:"error-inputLinkPhoto",className:"error"})]})})};var N=function(e){return Object(o.jsx)("div",{id:"popupPic",className:"popup popup__pic ".concat(!1!==e.card?"popup_is-opened":""),children:Object(o.jsxs)("div",{className:"popup__content popup__content_pic",children:[Object(o.jsx)("img",{id:"popupPicOpen",src:e.card.link,className:"popup-pic__open",alt:""}),Object(o.jsx)("img",{src:b,onMouseUp:e.onClose,alt:"",id:"popupClosePic",className:"popup__close"})]})})};var g=function(){return Object(o.jsx)("footer",{className:"footer root__section",children:Object(o.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var C=function(){var e=p.api,t=i.a.useState(!1),n=Object(r.a)(t,2),s=n[0],c=n[1],a=i.a.useState(!1),u=Object(r.a)(a,2),l=u[0],j=u[1],_=i.a.useState(!1),b=Object(r.a)(_,2),O=b[0],C=b[1],y=i.a.useState(!1),P=Object(r.a)(y,2),U=P[0],L=P[1],E=i.a.useState(""),I=Object(r.a)(E,2),S=I[0],T=I[1],M=i.a.useState(""),B=Object(r.a)(M,2),w=B[0],A=B[1];i.a.useEffect((function(){e.getUserInfo().then((function(e){T(e)})),e.getInitialCards().then((function(e){console.log(e),A(e)}))}),[]);var F=function(){L(!1),j(!1),c(!1),C(!1)};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(d.Provider,{value:S,children:Object(o.jsxs)(h.Provider,{value:w,children:[Object(o.jsx)(m,{}),Object(o.jsx)(f,{onEditProfile:function(){c(!0)},onAddPlace:function(){j(!0)},onEditAvatar:function(){C(!0)},onCardClick:function(e){L(e)},setCards:A}),Object(o.jsx)(N,{card:U,onClose:F}),Object(o.jsx)(x,{isOpen:l,onClose:F}),Object(o.jsx)(k,{isOpen:s,onClose:F}),Object(o.jsx)(v,{isOpen:O,onClose:F}),Object(o.jsx)(g,{})]})})})};a.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.bd828499.chunk.js.map